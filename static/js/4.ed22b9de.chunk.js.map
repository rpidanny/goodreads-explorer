{"version":3,"sources":["assets/images/good_reads_explorer.png","components/ErrorBoundary/index.jsx","components/NetworkGraph/examples/basic/tiny_grid.png","components/UserProfile/index.jsx","components/NetworkGraph/components/Node/index.js","components/NetworkGraph/components/Link/index.js","components/NetworkGraph/components/Universe/index.js","components/NetworkGraph/index.js","components/BookCover/index.jsx","components/BookLibrary/index.jsx","components/Settings/index.js","utils/graphHelper.js","containers/Dashboard/index.jsx"],"names":["module","exports","__webpack_require__","p","ErrorBoundary","props","_this","Object","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","hasError","error","info","console","log","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","children","Component","Meta","Card","UserProfile","react_default","card","bordered","className","avatar","src","user","image","size","title","href","link","target","rel","name","description","length","concat","slice","Node","classCallCheck","possibleConstructorReturn","getPrototypeOf","clickHandler","bind","assertThisInitialized","doubleClickHandler","mouseOverHandler","mouseOutHandler","clickTimeout","onClick","type","data","id","onDoubleClick","event","x","onMouseOver","text","onMouseOut","_this$props","radius","color","y","style","active","transform","cursor","opacity","r","fill","getThumbnail","img","shortText","textStyle","xlinkHref","clipPath","width","dx","dy","fontSize","defaultProps","stroke","strokeWidth","fontWeight","Link","d","pointer","getPointer","markerEnd","getLabel","viewBox","refX","arrowOffset","refY","markerWidth","markerHeight","orient","startOffset","pointerEvents","textAnchor","Universe","objectSpread","getArcPath","getLinks","nextProps","setState","source","links","filter","map","l","scale","sweep","clockwise","arguments","undefined","x1","y1","x2","y2","siblings","linkIdx","scaleOrdinal","domain","range","arcScale","dr","Math","sqrt","_this2","_this$state","nodes","reduce","acc","idx","push","components_Link","key","node","components_Node","assign","NetworkGraph","selectedNode","activeNodes","simulation","initSimulation","height","k","tooltip","top","left","initZoomHandler","updateSimulation","onTick","svg","React","createRef","interval","fps","millis","Date","now","getNeighborNodes","current","clientWidth","clientHeight","newProps","_this3","linkForce","forceLink","strength","distance","forceSimulation","force","_this4","select","zoomHandler","zoom","on","_this5","attraceForceStrength","chargeStrength","collisionRadiusOffset","collisionStrength","animation","velocityDecay","alphaStart","cluster","clusterRadiusScale","forEach","sourceNode","targetNode","forceCenter","forceManyBody","forceCollide","clusters","uniqBy","arr","cos","PI","random","sin","alpha","applyClusterForce","alphaTarget","restart","tick","e","currentTime","payload","clientY","clientX","neighbors","_this$state2","indexOf","ref","components_Universe","vx","vy","backgroundColor","overflow","position","imgStyle","transition","BookCover","_ref","index","photo","margin","direction","lib_default","alt","BookLibrary","react_photo_gallery_esm","photos","books","book","small_image_url","replace","str","tmp","split","obj","window","open","columns","ImageComponent","CheckboxGroup","Checkbox","Group","plainOptions","Settings","defaultOptions","option","settings","updateState","updateFps","updateCluster","updateAnimation","updateAlphaStart","updateVelocityDecay","updateChargeStrength","updateCollisionStrength","updateClusterRadiusScale","updateCollisionRadiusOffset","updateAttracForceStrength","val","onChange","_this$state$settings","borderBottom","padding","options","value","checked","es_tooltip","placement","slider","defaultValue","max","min","step","onAfterChange","es_button","onReset","block","minifyString","word","charAt","toUpperCase","join","SubMenu","Menu","Content","Layout","Sider","TreeNode","Tree","mapDispatchToProps","getUserInfo","getUserData","defaultGraphSettings","Dashboard","localStorage","getItem","selectedShelf","selectedShelves","selectedMenu","graphSettings","JSON","parse","onSelect","onCheck","onSettingsChange","onSettingsReset","match","params","userId","selectedKeys","checkedKeys","setItem","stringify","removeItem","location","reload","userData","layout","background","es_Link","to","goodReadsLogo","getUserComponent","getMenu","breadcrumb","Item","backgroundImage","bgImage","getContent","context","_context$state","_getGraphData","shelves","bookNodes","authorNodes","publisherNodes","user_shelves","shelf","property","author","authors","$t","image_url","publisher","sourceType","targetType","publicationYear","publication_year","publicationMonth","publication_month","publicationDay","publication_day","values","getGraphData","components_NetworkGraph","getBookLibrary","components_UserProfile","userName","user_name","about","last_active","menu","mode","defaultOpenKeys","borderRight","theme","icon","tree","checkable","published","disableCheckbox","disabled","components_Settings","bookShelf","find","sh","components_BookLibrary","connect","userInfo","dashboard"],"mappings":"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","file":"static/js/4.ed22b9de.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/good_reads_explorer.eff85db6.png\";","import React, { Component } from 'react'\n\nclass ErrorBoundary extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError (error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch (error, info) {\n    // You can also log the error to an error reporting service\n    // logErrorToMyService(error, info)\n    console.log('Error', error, info)\n  }\n\n  render () {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAAAAACMIRMSAAAAmElEQVR4AX2RwQ4EIQhD/f9ftYW7p6U0buYiEmLG5fGUXRlELda2eyEJ6mDFea36Kf8RZ1egUjFTOFTtn4RSFN6Uu7Pq0bu7iFx8U/ZEh3yyyEk1fFIy+CXiXB+Ve3TdGVxuN6XTeRo0Y6d38aMLH8ZvtBXjDK/BtayAreM0dBdXZqcsdq+cJv/9f/3l286UK68zZVKX6V0/HECKK51+49AAAAAASUVORK5CYII=\"","import React from 'react'\n\n// antd components\nimport { Avatar, Card } from 'antd'\n\nimport './style.css'\n\nconst { Meta } = Card\n\nconst UserProfile = props => (\n  <Card\n    bordered={false}\n    className='userCard'\n  >\n    <Meta\n      avatar={\n        <Avatar src={props.user.image} size='large' />\n      }\n      title={\n        <a\n          href={props.user.link}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          {props.user.name}\n        </a>\n      }\n      description={\n        props.user.description.length > 160\n          ? `${props.user.description.slice(0, 160)}...`\n          : props.user.description}\n      className='userCardMeta'\n    />\n  </Card>\n)\n\nexport default UserProfile\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\n// import './style.css'\n\nclass Node extends Component {\n  constructor () {\n    super()\n    this.clickHandler = this.clickHandler.bind(this)\n    this.doubleClickHandler = this.doubleClickHandler.bind(this)\n    this.mouseOverHandler = this.mouseOverHandler.bind(this)\n    this.mouseOutHandler = this.mouseOutHandler.bind(this)\n    // for click vs dblclick\n    this.clickTimeout = null\n  }\n\n  clickHandler () {\n    this.props.onClick({\n      type: 'NODE',\n      data: this.props.id\n    })\n    // if (this.clickTimeout) {\n    //   clearTimeout(this.clickTimeout)\n    //   this.clickTimeout = null\n    //   this.doubleClickHandler()\n    // } else {\n    //   this.clickTimeout = setTimeout(() => {\n    //     if (this.props.onClick) {\n    //       this.props.onClick({\n    //         type: 'NODE',\n    //         data: this.props.id\n    //       })\n    //     }\n    //   }, 300)\n    // }\n  }\n\n  doubleClickHandler () {\n    if (this.props.onDoubleClick) {\n      this.props.onDoubleClick({\n        type: 'NODE',\n        data: this.props.id\n      })\n    }\n  }\n\n  mouseOverHandler (event, x) {\n    if (this.props.onMouseOver) {\n      this.props.onMouseOver({\n        type: 'NODE',\n        data: {\n          id: this.props.id,\n          text: this.props.text,\n          type: this.props.type\n        },\n        event\n      })\n    }\n  }\n\n  mouseOutHandler (event) {\n    if (this.props.onMouseOut) {\n      this.props.onMouseOut({\n        type: 'NODE',\n        data: {\n          id: this.props.id,\n          text: this.props.text,\n          type: this.props.type\n        },\n        event\n      })\n    }\n  }\n\n  render () {\n    const {\n      className,\n      radius,\n      color,\n      x,\n      y,\n      style,\n      active\n    } = this.props\n    return (\n      <g\n        className={className}\n        transform={`translate(${x},${y})`}\n        onClick={this.clickHandler}\n        style={{\n          cursor: 'pointer',\n          opacity: active ? 1 : 0.1\n        }}\n        onMouseOver={this.mouseOverHandler}\n        onMouseOut={this.mouseOutHandler}\n      >\n        <circle\n          r={radius}\n          fill={color}\n          style={style}\n        />\n        {\n          getThumbnail(this.props)\n        }\n      </g>\n    )\n  }\n}\n\nconst getThumbnail = (props) => {\n  const { id, img, radius, shortText, textStyle } = props\n  if (img) {\n    return (\n      <g>\n        <defs>\n          <clipPath\n            id={`clip_${id}`}\n          >\n            <circle\n              r={radius - 1}\n              // fill={bgColor}\n            />\n          </clipPath>\n        </defs>\n        <image\n          xlinkHref={img}\n          clipPath={`url(#clip_${id})`}\n          x={-radius}\n          y={-radius}\n          width={radius * 2}\n        />\n      </g>\n    )\n  } else {\n    return (\n      <text\n        dx={-radius / 2}\n        dy={textStyle.fontSize / 2}\n        style={textStyle}\n      >\n        {shortText}\n      </text>\n    )\n  }\n}\n\nNode.defaultProps = {\n  className: 'node',\n  radius: 35,\n  color: '#FFFFFF',\n  style: {\n    r: 35,\n    stroke: '#375E97',\n    strokeWidth: '3px'\n  },\n  textStyle: {\n    fontSize: 15,\n    fill: '#fff',\n    strokeWidth: '3px',\n    fontWeight: 'normal'\n  },\n  x: 0,\n  y: 0,\n  active: true\n}\n\nNode.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string,\n  shortText: PropTypes.string,\n  className: PropTypes.string,\n  img: PropTypes.string,\n  color: PropTypes.string,\n  radius: PropTypes.number,\n  style: PropTypes.shape({\n    r: PropTypes.number,\n    stroke: PropTypes.string,\n    strokeWidth: PropTypes.string\n  }),\n  textStyle: PropTypes.shape({\n    fontSize: PropTypes.number,\n    fill: PropTypes.string,\n    strokeWidth: PropTypes.string,\n    fontWeight: PropTypes.string\n  }),\n  x: PropTypes.number,\n  y: PropTypes.number,\n  onClick: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  onMouseOver: PropTypes.func,\n  active: PropTypes.bool\n}\n\nexport default Node\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Link extends Component {\n  render () {\n    const { d, pointer, style, id, active } = this.props\n    return (\n      <g\n        style={{\n          opacity: active ? 1 : 0.1\n        }}\n      >\n        { getPointer(this.props) }\n        <path\n          id={id}\n          style={style}\n          d={d}\n          markerEnd={pointer ? `url(#${id}_pointer)` : pointer}\n        />\n        { getLabel(this.props) }\n      </g>\n    )\n  }\n}\n\nconst getPointer = (props) => {\n  if (props.pointer) {\n    return (\n      <defs>\n        <marker\n          id={`${props.id}_pointer`}\n          viewBox='0 -5 10 10'\n          refX={props.arrowOffset}\n          refY='-2'\n          markerWidth='6'\n          markerHeight='6'\n          orient='auto'\n        >\n          <path\n            d='M0,-5L10,0L0,5'\n            fill='#666'\n            style={{\n              opacity: 1\n            }} />\n        </marker>\n      </defs>\n    )\n  }\n}\n\nconst getLabel = (props) => {\n  if (props.type) {\n    return (\n      <text>\n        <textPath\n          dx={0}\n          dy={5}\n          href={`#${props.id}`}\n          startOffset='50%'\n          style={props.textStyle}\n        >\n          {props.type}\n        </textPath>\n      </text>\n    )\n  }\n}\n\nLink.defaultProps = {\n  style: {\n    strokeWidth: 1.5,\n    fill: 'none',\n    stroke: 'gba(50, 50, 50, 0.2)'\n  },\n  textStyle: {\n    pointerEvents: 'none',\n    textAnchor: 'middle',\n    fill: '#333'\n  },\n  pointer: true,\n  active: true\n}\n\nLink.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string,\n  style: PropTypes.object,\n  textStyle: PropTypes.object,\n  d: PropTypes.string.isRequired,\n  pointer: PropTypes.bool,\n  active: PropTypes.bool\n}\n\nexport default Link\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { scaleOrdinal } from 'd3-scale'\n\nimport Node from '../Node'\nimport Link from '../Link'\n\nclass Universe extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      ...this.props\n    }\n\n    this.getArcPath = this.getArcPath.bind(this)\n    this.getLinks = this.getLinks.bind(this)\n  }\n\n  componentWillReceiveProps (nextProps) {\n    this.setState({ ...nextProps })\n  }\n\n  getLinks (source, target) {\n    return this.state.links\n      .filter(\n        link =>\n          link.source.id === source.id &&\n          link.target.id === target.id\n      )\n      .map(l => l.type)\n  }\n\n  getArcPath (link, clockwise = true) {\n    const x1 = clockwise ? link.source.x : link.target.x\n    const y1 = clockwise ? link.source.y : link.target.y\n    const x2 = clockwise ? link.target.x : link.source.x\n    const y2 = clockwise ? link.target.y : link.source.y\n    const dx = x2 - x1\n    const dy = y2 - y1\n    const siblings = this.getLinks(link.source, link.target)\n    // const siblingCount = siblings.length\n    const siblingCount = 2\n    const xRotation = 0\n    const largeArc = 0\n\n    if (siblingCount > 1) {\n      // console.log(siblings)\n      const arcScale = scaleOrdinal()\n        .domain(siblings)\n        .range([1, siblingCount])\n      const linkIdx = arcScale(link.type)\n      let scale\n      let sweep\n      if (linkIdx === 1) {\n        sweep = 1\n        scale = 1\n        // return `M${link.source.x},${link.source.y} L${link.target.x},${link.target.y}`\n      } else if (linkIdx % 2 === 0) {\n        sweep = 0\n        scale = linkIdx / 2\n      } else if (linkIdx % 3 === 0) {\n        sweep = 1\n        scale = linkIdx / 3 + 1\n      }\n      const dr =\n        Math.sqrt(dx * dx + dy * dy) / (1 + (1 / siblingCount) * (scale - 1))\n      return `M${x1},${y1}A${dr * 1.7},${dr *\n        1.7} ${xRotation}, ${largeArc}, ${sweep} ${x2},${y2}`\n    }\n    return `M${link.source.x},${link.source.y} L${link.target.x},${link.target.y}`\n  }\n\n  render () {\n    const { nodes, links } = this.state\n    return (\n      <g\n        className={this.props.className}\n        transform={this.props.transform}\n      >\n        <g className='links'>\n          {\n            links.reduce((acc, link, idx) => {\n              if (typeof link.source === 'object' && typeof link.target === 'object') {\n                acc.push(\n                  <Link\n                    key={idx}\n                    d={this.getArcPath(link)}\n                    style={link.style}\n                    id={link.id}\n                    type={link.type}\n                    arrowOffset={link.target.radius * 1.45}\n                    active={link.active}\n                  />\n                )\n                return acc\n              }\n              return acc\n            }, [])\n          }\n        </g>\n        <g className='nodes'>\n          {\n            nodes.map((node, idx) =>\n              <Node\n                key={idx}\n                onClick={this.props.onClick}\n                onDoubleClick={this.props.onDoubleClick}\n                onMouseOver={this.props.onMouseOver}\n                onMouseOut={this.props.onMouseOut}\n                {...node}\n              />\n            )\n          }\n        </g>\n      </g>\n    )\n  }\n}\n\nUniverse.defaultProps = {\n  className: 'universe',\n  nodes: [],\n  links: []\n}\n\nUniverse.propTypes = {\n  className: PropTypes.string,\n  nodes: PropTypes.array,\n  links: PropTypes.array,\n  onMouseOver: PropTypes.func,\n  onMouseOut: PropTypes.func\n}\n\nexport default Universe\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { select, event } from 'd3-selection'\nimport {\n  forceLink,\n  forceSimulation,\n  forceCenter,\n  forceManyBody,\n  forceCollide\n} from 'd3-force'\nimport { zoom } from 'd3-zoom'\nimport uniqBy from 'lodash.uniqby'\n\nimport Universe from './components/Universe'\n\nimport './style.css'\n\nclass NetworkGraph extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      nodes: [],\n      links: [],\n      selectedNode: null,\n      activeNodes: [],\n      simulation: this.initSimulation(),\n      width: 100,\n      height: 100,\n      transform: {\n        x: 0,\n        y: 0,\n        k: 1\n      },\n      tooltip: {\n        text: '',\n        style: {\n          opacity: 0,\n          top: 0,\n          left: 0\n        }\n      }\n    }\n    this.initSimulation = this.initSimulation.bind(this)\n    this.initZoomHandler = this.initZoomHandler.bind(this)\n    this.updateSimulation = this.updateSimulation.bind(this)\n    this.onTick = this.onTick.bind(this)\n    this.svg = React.createRef()\n    this.nodes = []\n    this.links = []\n\n    // to timit fps\n    this.interval = (1000 / this.props.fps)\n    this.millis = Date.now()\n\n    // mouseevents\n    this.mouseOverHandler = this.mouseOverHandler.bind(this)\n    this.mouseOutHandler = this.mouseOutHandler.bind(this)\n    this.clickHandler = this.clickHandler.bind(this)\n\n    // graph functions\n    this.getNeighborNodes = this.getNeighborNodes.bind(this)\n  }\n\n  componentDidMount () {\n    this.initZoomHandler()\n    this.setState({\n      ...this.props,\n      width: this.svg.current.clientWidth,\n      height: this.svg.current.clientHeight\n    }, () => {\n      this.updateSimulation()\n    })\n  }\n\n  componentWillReceiveProps (newProps) {\n    this.setState({\n      ...newProps\n    }, () => {\n      this.interval = (1000 / this.state.fps)\n      this.updateSimulation()\n    })\n  }\n\n  initSimulation () {\n    const linkForce = forceLink()\n      .id(link => link.id)\n      .strength(link => link.strength)\n      .distance(link => link.distance)\n    const simulation = forceSimulation().force('link', linkForce)\n\n    return simulation\n  }\n\n  initZoomHandler () {\n    // TODO: replace select dependency\n    // add zoom capabilities\n    const svg = select('.svgGraph')\n    const zoomHandler = zoom().on('zoom', () => {\n      this.setState({\n        transform: event.transform\n      })\n    })\n    svg.call(zoomHandler).on('dblclick.zoom', null)\n  }\n\n  updateSimulation () {\n    const {\n      nodes,\n      links,\n      simulation,\n      width,\n      height,\n      attraceForceStrength,\n      chargeStrength,\n      collisionRadiusOffset,\n      collisionStrength,\n      animation,\n      velocityDecay,\n      alphaStart,\n      cluster,\n      clusterRadiusScale\n    } = this.state\n\n    this.nodes = nodes\n    this.links = []\n\n    // bind nodes to links\n    links.forEach(link => {\n      const sourceNode = this.nodes.filter(\n        node => node.id === link.source\n      )[0]\n      const targetNode = this.nodes.filter(\n        node => node.id === link.target\n      )[0]\n      if (sourceNode && targetNode) {\n        this.links.push({\n          ...link,\n          source: sourceNode,\n          target: targetNode\n        })\n      }\n    })\n    simulation\n      .nodes(this.nodes)\n      .on('tick', this.onTick)\n    simulation.force('link').links(this.links)\n    simulation\n      .force('center', forceCenter(width / 2, height / 2))\n      .force('attraceForce', forceManyBody().strength(attraceForceStrength))\n      .force('charge', forceManyBody().strength(chargeStrength))\n      .force(\n        'collision',\n        forceCollide()\n          .radius(node => node.radius + collisionRadiusOffset)\n          .strength(collisionStrength)\n      )\n\n    // Enable clustering of nodes of same type\n    if (cluster) {\n      const clusters = {}\n      const nodeTypes = uniqBy(this.nodes, 'type').map(type => type.type)\n\n      nodeTypes.forEach((type, idx, arr) => {\n        if (!clusters[type]) {\n          const radius = width > height ? height * clusterRadiusScale : width * clusterRadiusScale\n          clusters[type] = {\n            x: Math.cos((idx + 1) / arr.length * 2 * Math.PI) * radius + width / 2 + Math.random(),\n            y: Math.sin((idx + 1) / arr.length * 2 * Math.PI) * radius + height / 2 + Math.random(),\n            radius\n          }\n        }\n      })\n\n      simulation.force('cluster', alpha =>\n        applyClusterForce(alpha, this.nodes, clusters)\n      )\n    } else {\n      simulation.force('cluster', null)\n    }\n\n    simulation\n      .alpha(alphaStart)\n      .alphaTarget(0)\n      .velocityDecay(velocityDecay)\n      .restart()\n\n    if (!animation) {\n      while (simulation.alpha() >= 0.02) {\n        simulation.tick()\n      }\n    }\n  }\n\n  onTick (e) {\n    // limit rendering\n    const currentTime = Date.now()\n    if (currentTime - this.millis > this.interval) {\n      this.millis = currentTime\n      this.setState({\n        nodes: this.nodes,\n        links: this.links\n      })\n    }\n  }\n\n  mouseOutHandler () {\n    this.setState({\n      tooltip: {\n        style: {\n          opacity: 0\n        }\n      }\n    })\n  }\n\n  mouseOverHandler (payload) {\n    const { event, type, data } = payload\n    let text = ''\n    if (type === 'NODE') {\n      text = `[${data.type}] ${data.text}`\n    } else if (type === 'LINK') {\n      text = `${data.type}`\n    }\n    this.setState({\n      tooltip: {\n        text,\n        style: {\n          opacity: 1,\n          top: event.clientY + 15,\n          left: event.clientX + 15\n        }\n      }\n    })\n  }\n\n  clickHandler (event) {\n    if (this.state.selectedNode === event.data) {\n      this.setState({\n        selectedNode: null,\n        activeNodes: []\n      })\n    } else {\n      this.setState({\n        selectedNode: event.data,\n        activeNodes: this.getNeighborNodes(event.data)\n      })\n    }\n  }\n\n  getNeighborNodes (node) {\n    return this.links.reduce(\n      (neighbors, link) => {\n        if (link.target.id === node) {\n          neighbors.push(link.source.id)\n        } else if (link.source.id === node) {\n          neighbors.push(link.target.id)\n        }\n        return neighbors\n      },\n      []\n    )\n  }\n\n  render () {\n    const { transform, tooltip, selectedNode, activeNodes } = this.state\n\n    // determine opacity of node / link based on if its selected or not\n    const nodes = this.state.nodes.map(node => ({\n      ...node,\n      active: selectedNode === null || node.id === selectedNode || activeNodes.indexOf(node.id) > -1\n    }))\n\n    const links = this.state.links.map(link => ({\n      ...link,\n      active:\n        selectedNode === null\n        || link.source.id === selectedNode\n        || link.target.id === selectedNode\n    }))\n\n    return (\n      <div\n        className='networkGraph'\n        style={{\n          width: '100%',\n          height: '100%'\n        }}\n      >\n        <svg\n          className='svgGraph'\n          width='100%'\n          height='100%'\n          ref={this.svg}\n        >\n          <Universe\n            nodes={nodes}\n            links={links}\n            transform={\n              `translate(${transform.x},${transform.y}) scale(${transform.k})`\n            }\n            onClick={this.clickHandler}\n            onDoubleClick={this.props.onDoubleClick}\n            onMouseOver={this.mouseOverHandler}\n            onMouseOut={this.mouseOutHandler}\n          />\n        </svg>\n        {/* <span className='zoomIndicator'>{parseInt(transform.k * 100, 10)} %</span> */}\n        <span\n          className='networkGrapTooltip'\n          style={tooltip.style}\n        >\n          {tooltip.text}\n        </span>\n      </div>\n    )\n  }\n}\n\n// node cluster handler\nconst applyClusterForce = (alpha, nodes, clusters) => {\n  nodes.forEach(node => {\n    const cluster = clusters[node.type]\n    if (cluster.x !== node.x && cluster.y !== node.y) {\n      const k = alpha * 0.5\n      node.vx -= (node.x - cluster.x) * k\n      node.vy -= (node.y - cluster.y) * k\n    }\n  })\n}\n\nNetworkGraph.defaultProps = {\n  nodes: [],\n  links: [],\n  attraceForceStrength: 10,\n  chargeStrength: -10,\n  collisionRadiusOffset: 15,\n  collisionStrength: 0.5,\n  animation: true,\n  cluster: false,\n  fps: 60,\n  alphaStart: 1,\n  velocityDecay: 0.4,\n  clusterRadiusScale: 2\n}\n\nNetworkGraph.propTypes = {\n  nodes: PropTypes.array,\n  links: PropTypes.array,\n  attraceForceStrength: PropTypes.number,\n  chargeStrength: PropTypes.number,\n  collisionRadiusOffset: PropTypes.number,\n  collisionStrength: PropTypes.number,\n  animation: PropTypes.bool,\n  fps: PropTypes.number,\n  alphaStart: PropTypes.number,\n  velocityDecay: PropTypes.number,\n  onClick: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  cluster: PropTypes.bool,\n  clusterRadiusScale: PropTypes.number\n}\n\nexport default NetworkGraph\n","import React from 'react'\nimport LazyLoad from 'react-lazyload'\n\nconst style = {\n  backgroundColor: '#eee',\n  cursor: 'pointer',\n  overflow: 'hidden',\n  position: 'relative'\n}\n\nconst imgStyle = {\n  transition: 'transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s'\n}\n\nconst BookCover = ({\n  index,\n  onClick,\n  photo,\n  margin,\n  direction,\n  top,\n  left\n}) => {\n  if (direction === 'column') {\n    style.position = 'absolute'\n    style.left = left\n    style.top = top\n  }\n  return (\n    <div\n      style={{ margin, height: photo.height, width: photo.width, ...style }}\n      className='lazy-image'\n    >\n      <LazyLoad\n        overflow\n      >\n        <img\n          style={\n            { ...imgStyle }\n          }\n          {...photo}\n          onClick={e => onClick(e, { index, photo })}\n          alt={photo.alt}\n          title={photo.alt}\n        />\n      </LazyLoad>\n    </div>\n  )\n}\n\nexport default BookCover\n","import React from 'react'\nimport Gallery from 'react-photo-gallery'\nimport BookCover from '../BookCover'\n\nconst BookLibrary = (props) => (\n  <Gallery\n    photos={\n      props.books.map((book, idx) => ({\n        // ...book,\n        src: book.small_image_url.replace(/.(s\\/)/g, str => {\n          const tmp = str.split('s/')\n          if (tmp[0] < 58) {\n            return tmp[0].concat('l/')\n          }\n          return str\n        }),\n        width: 98,\n        height: 148,\n        alt: book.title,\n        key: book.title\n      }))\n    }\n    onClick={\n      (event, obj) => {\n        window.open(obj.photo.link, '_blank')\n      }\n    }\n    direction='column'\n    margin={props.margin}\n    columns={props.columns}\n    ImageComponent={BookCover}\n  />\n)\n\nexport default BookLibrary\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { Checkbox, Slider, Button, Tooltip } from 'antd'\n\nimport './style.css'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst plainOptions = ['animation', 'cluster']\n\nclass Settings extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      ...props\n    }\n\n    this.defaultOptions = plainOptions.filter((option) => this.props.settings[option])\n\n    this.updateState = this.updateState.bind(this)\n\n    // settings handler\n    this.updateFps = this.updateFps.bind(this)\n    this.updateCluster = this.updateCluster.bind(this)\n    this.updateAnimation = this.updateAnimation.bind(this)\n    this.updateAlphaStart = this.updateAlphaStart.bind(this)\n    this.updateVelocityDecay = this.updateVelocityDecay.bind(this)\n    this.updateChargeStrength = this.updateChargeStrength.bind(this)\n    this.updateCollisionStrength = this.updateCollisionStrength.bind(this)\n    this.updateClusterRadiusScale = this.updateClusterRadiusScale.bind(this)\n    this.updateCollisionRadiusOffset = this.updateCollisionRadiusOffset.bind(this)\n    this.updateAttracForceStrength = this.updateAttracForceStrength.bind(this)\n  }\n\n  updateState (val) {\n    // update local state and trigger parent onChange function\n    this.setState({\n      settings: {\n        ...this.state.settings,\n        ...val\n      }\n    },\n    () => this.props.onChange(this.state.settings))\n  }\n\n  updateFps (val) {\n    this.updateState({\n      fps: val\n    })\n  }\n\n  updateCluster (val) {\n    this.updateState({\n      cluster: val\n    })\n  }\n\n  updateAnimation (val) {\n    this.updateState({\n      animation: val\n    })\n  }\n\n  updateAlphaStart (val) {\n    this.updateState({\n      alphaStart: val\n    })\n  }\n\n  updateVelocityDecay (val) {\n    this.updateState({\n      velocityDecay: val\n    })\n  }\n\n  updateChargeStrength (val) {\n    this.updateState({\n      chargeStrength: val\n    })\n  }\n\n  updateCollisionStrength (val) {\n    this.updateState({\n      collisionStrength: val\n    })\n  }\n\n  updateClusterRadiusScale (val) {\n    this.updateState({\n      clusterRadiusScale: val\n    })\n  }\n\n  updateCollisionRadiusOffset (val) {\n    this.updateState({\n      collisionRadiusOffset: val\n    })\n  }\n\n  updateAttracForceStrength (val) {\n    this.updateState({\n      attraceForceStrength: val\n    })\n  }\n\n  render () {\n    const {\n      fps,\n      alphaStart,\n      velocityDecay,\n      attraceForceStrength,\n      collisionStrength,\n      collisionRadiusOffset,\n      clusterRadiusScale,\n      chargeStrength\n    } = this.state.settings\n\n    // this.props.onChange(this.state)\n\n    return (\n      <div\n        className='settings'\n      >\n        <ul>\n          <li>\n            <div style={{ borderBottom: '1px solid #E9E9E9', padding: 5 }}>\n              <CheckboxGroup\n                options={plainOptions}\n                value={this.defaultOptions}\n                onChange={(checked) => {\n                  this.defaultOptions = checked\n                  this.updateState({\n                    animation: checked.indexOf('animation') > -1,\n                    cluster: checked.indexOf('cluster') > -1\n                  })\n                }}\n                className='settingsCheckbox'\n              />\n            </div>\n          </li>\n          <li>\n            <Tooltip title='How many times per second to render the graph.' placement='rightTop'>\n              FPS ({fps})\n            </Tooltip>\n            <Slider\n              defaultValue={fps}\n              max={120}\n              min={1}\n              step={1}\n              onAfterChange={this.updateFps}\n            />\n          </li>\n          <li>\n            <Tooltip title='Initial Alpha of simulation.' placement='rightTop'>\n              Alpha Start ({alphaStart})\n            </Tooltip>\n            <Slider\n              defaultValue={alphaStart}\n              max={1}\n              min={0}\n              step={0.01}\n              onAfterChange={this.updateAlphaStart}\n            />\n          </li>\n          <li>\n            <Tooltip\n              title='The decay factor is akin to atmospheric friction; after the application of any forces during a tick, each nodes velocity is multiplied by 1 - decay. As with lowering the alpha decay rate, less velocity decay may converge on a better solution, but risks numerical instabilities and oscillation.'\n              placement='rightTop'\n            >\n              velocity Decay ({velocityDecay})\n            </Tooltip>\n            <Slider\n              defaultValue={velocityDecay}\n              max={1}\n              min={0}\n              step={0.01}\n              onAfterChange={this.updateVelocityDecay}\n            />\n          </li>\n          <li>\n            <Tooltip title='It can be used to simulate gravity (attraction) if the strength is positive, or electrostatic charge (repulsion) if the strength is negative.' placement='rightTop'>\n              Charge Strength ({chargeStrength})\n            </Tooltip>\n            <Slider\n              defaultValue={chargeStrength}\n              max={500}\n              min={-500}\n              step={1}\n              onAfterChange={this.updateChargeStrength}\n            />\n          </li>\n          <li>\n            <Tooltip title='Sets the collision force strength to the specified number.' placement='rightTop'>\n              Collision Strength ({collisionStrength})\n            </Tooltip>\n            <Slider\n              defaultValue={collisionStrength}\n              max={1}\n              min={0}\n              step={0.01}\n              onAfterChange={this.updateCollisionStrength}\n            />\n          </li>\n          <li>\n            <Tooltip title='The collision force treats nodes as circles with a given radius, rather than points, and prevents nodes from overlapping.' placement='rightTop'>\n              Collision Radius Offset ({collisionRadiusOffset})\n            </Tooltip>\n            <Slider\n              defaultValue={collisionRadiusOffset}\n              max={50}\n              min={0}\n              step={1}\n              onAfterChange={this.updateCollisionRadiusOffset}\n            />\n          </li>\n          <li>\n            <Tooltip title='Sets attractive force strength between nodes' placement='rightTop'>\n              Attractive Force Strength ({attraceForceStrength})\n            </Tooltip>\n            <Slider\n              defaultValue={attraceForceStrength}\n              max={500}\n              min={-500}\n              step={1}\n              onAfterChange={this.updateAttracForceStrength}\n            />\n          </li>\n          <li>\n            <Tooltip title='Radius of the circle around which to cluster the nodes.' placement='rightTop'>\n              Cluster Radius Scale ({clusterRadiusScale})\n            </Tooltip>\n            <Slider\n              defaultValue={clusterRadiusScale}\n              max={10}\n              min={0.5}\n              step={0.5}\n              onAfterChange={this.updateClusterRadiusScale}\n            />\n          </li>\n          <div\n            style={{\n              padding: 10\n            }}\n          >\n            <Button\n              type='danger'\n              onClick={() => this.props.onReset()}\n              block\n            >\n              Reset\n            </Button>\n          </div>\n        </ul>\n      </div>\n    )\n  }\n}\n\nSettings.defaultProps = {\n  settings: {\n    fps: 60,\n    cluster: true,\n    alphaStart: 1,\n    animation: true,\n    velocityDecay: 0.1,\n    chargeStrength: -100,\n    clusterRadiusScale: 2,\n    collisionStrength: 0.5,\n    collisionRadiusOffset: 15,\n    attraceForceStrength: -100\n  }\n}\n\nSettings.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onReset: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    fps: PropTypes.number,\n    cluster: PropTypes.bool,\n    alphaStart: PropTypes.number,\n    animation: PropTypes.bool,\n    velocityDecay: PropTypes.number,\n    chargeStrength: PropTypes.number,\n    clusterRadiusScale: PropTypes.number,\n    collisionStrength: PropTypes.number,\n    collisionRadiusOffset: PropTypes.number,\n    attraceForceStrength: PropTypes.number\n  })\n}\n\nexport default Settings\n","const minifyString = text => {\n  return text.split(' ').slice(0, 3).map(word => word.charAt(0).toUpperCase()).join('')\n}\n\nexport function getGraphData (userData, shelves) {\n  let books = []\n  let bookNodes = {}\n  let authorNodes = {}\n  let publisherNodes = {}\n  let nodes = []\n  let links = []\n\n  const bookShelves = userData.user_shelves\n\n  // nodes.push({\n  //   text: userData.name,\n  //   id: userData.id,\n  //   img: userData.image_url,\n  //   type: 'USER',\n  //   color: '#336B87',\n  //   radius: 55,\n  //   style: {\n  //     r: 55,\n  //     stroke: '#375E97',\n  //     strokeWidth: '3px'\n  //   }\n  // })\n\n  bookShelves.forEach(shelf => {\n    if (shelves.indexOf(shelf.name) > -1) {\n      if (shelf.books.book) {\n        const tmpList = shelf.books.book.length ? shelf.books.book : [ shelf.books.book ]\n        tmpList.forEach(book => {\n          books.push(\n            {\n              ...book,\n              property: {\n                shelf: shelf.name\n              }\n            }\n          )\n        })\n      }\n    }\n  })\n\n  books.forEach(book => {\n    const { author } = book.authors\n\n    if (!bookNodes[book.id.$t]) {\n      // Create Book Nodes\n      bookNodes[book.id.$t] = {\n        id: book.id.$t,\n        text: book.title,\n        type: 'BOOK',\n        img: book.image_url,\n        color: '#336B87',\n        radius: 35,\n        style: {\n          r: 35,\n          stroke: '#375E97',\n          strokeWidth: '3px'\n        }\n      }\n      // Create Author Nodes\n      if (!authorNodes[author.id]) {\n        authorNodes[author.id] = {\n          id: author.id,\n          text: author.name,\n          type: 'AUTHOR',\n          img: author.image_url.$t,\n          color: '#FB6542',\n          radius: 35,\n          style: {\n            r: 35,\n            stroke: '#FB6542',\n            strokeWidth: '3px'\n          }\n        }\n      }\n      // Create Publisher Nodes\n      if (!publisherNodes[book.publisher]) {\n        publisherNodes[book.publisher] = {\n          id: typeof book.publisher === 'string' ? book.publisher : 'Self Published',\n          text: typeof book.publisher === 'string' ? book.publisher : 'Self Published',\n          type: 'PUBLISHER',\n          color: '#DDA487',\n          radius: 35,\n          style: {\n            r: 35,\n            stroke: '#7D4427',\n            strokeWidth: '3px'\n          }\n        }\n      }\n      // Create Authoer --> Book relationship\n      links.push({\n        source: author.id,\n        sourceType: 'AUTHOR',\n        target: book.id.$t,\n        targetType: 'BOOK',\n        type: 'AUTHOR_OF',\n        property: {\n          publicationYear: book.publication_year,\n          publicationMonth: book.publication_month,\n          publicationDay: book.publication_day\n        }\n      })\n      // Create Book --> Publisher relationship\n      links.push({\n        source: book.id.$t,\n        sourceType: 'BOOK',\n        target: typeof book.publisher === 'string' ? book.publisher : 'Self Published',\n        targetType: 'PUBLISHER',\n        type: 'PUBLISHED_BY',\n        property: {\n          publicationYear: book.publication_year,\n          publicationMonth: book.publication_month,\n          publicationDay: book.publication_day\n        }\n      })\n\n      // Create Author --> Publisher relationship\n      links.push({\n        source: author.id,\n        sourceType: 'AUTHOR',\n        target: book.publisher,\n        targetType: 'PUBLISHER',\n        type: 'WORKS_WITH',\n        property: {\n          publicationYear: book.publication_year,\n          publicationMonth: book.publication_month,\n          publicationDay: book.publication_day\n        }\n      })\n    }\n  })\n\n  // Collect all nodes\n  nodes = Object.values(bookNodes)\n    .concat(Object.values(authorNodes))\n    .concat(Object.values(publisherNodes))\n    .map((node, idx) => ({\n      ...node,\n      shortText: minifyString(node.text),\n      textStyle: {\n        fontSize: 15,\n        fill: '#fff',\n        strokeWidth: '2px',\n        fontWeight: 'normal'\n      }\n    }))\n\n  return {\n    nodes,\n    links: links.map(link => ({\n      ...link,\n      strength: 0.5,\n      distance: 350,\n      id: `${link.source}-${link.type}-${link.target}`,\n      style: {\n        strokeWidth: 1.5,\n        fill: 'none',\n        stroke: 'rgba(50, 50, 50, 0.2)'\n      }\n    }))\n  }\n}\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { getUserInfo, getUserData } from './action'\n\n// antd components\nimport { Layout, Menu, Breadcrumb, Icon, Tree } from 'antd'\n\nimport UserProfile from '../../components/UserProfile'\nimport NetworkGraph from '../../components/NetworkGraph'\nimport BookLibrary from '../../components/BookLibrary'\nimport Settings from '../../components/Settings'\nimport ErrorBoundary from '../../components/ErrorBoundary'\n\nimport { getGraphData } from '../../utils/graphHelper'\n\nimport bgImage from '../../components/NetworkGraph/examples/basic/tiny_grid.png'\n// import goodReadsLogo from '../../assets/images/goodreads-logo-transparent.png'\nimport goodReadsLogo from '../../assets/images/good_reads_explorer.png'\n\nimport './style.css'\n\nconst { SubMenu } = Menu\nconst { Content, Sider } = Layout\nconst { TreeNode } = Tree\n\nconst mapStorageToProps = state => ({\n  userInfo: state.dashboard.userInfo,\n  userData: state.dashboard.userData\n})\n\nconst mapDispatchToProps = {\n  getUserInfo,\n  getUserData\n}\n\nconst defaultGraphSettings = {\n  fps: 60,\n  cluster: true,\n  alphaStart: 1,\n  animation: true,\n  velocityDecay: 0.1,\n  chargeStrength: -100,\n  collisionStrength: 0.5,\n  collisionRadiusOffset: 15,\n  attraceForceStrength: -100,\n  clusterRadiusScale: 2\n}\n\nclass Dashboard extends Component {\n  constructor (props) {\n    super(props)\n\n    // get graph settings from localstorage\n    const settings = window.localStorage.getItem('graphSettings')\n\n    this.state = {\n      selectedShelf: null,\n      selectedShelves: [],\n      selectedMenu: 0,\n      graphSettings: settings ? JSON.parse(settings) : defaultGraphSettings\n    }\n    console.log('Init Settings', this.state.graphSettings)\n    this.onSelect = this.onSelect.bind(this)\n    this.onCheck = this.onCheck.bind(this)\n    this.onSettingsChange = this.onSettingsChange.bind(this)\n    this.onSettingsReset = this.onSettingsReset.bind(this)\n  }\n\n  componentDidMount () {\n    this.props.getUserData(this.props.match.params.userId)\n  }\n\n  onSelect (selectedKeys, info) {\n    console.log('selected', selectedKeys, info)\n  }\n\n  onCheck (checkedKeys, info) {\n    console.log('onCheck', checkedKeys, info)\n    this.setState({\n      selectedShelves: checkedKeys\n    })\n  }\n\n  onSettingsChange (settings) {\n    this.setState({\n      graphSettings: settings\n    })\n    // Store settings on local storage\n    window.localStorage.setItem('graphSettings', JSON.stringify(settings))\n  }\n\n  onSettingsReset () {\n    this.setState({\n      graphSettings: defaultGraphSettings\n    })\n\n    // clear settings on local storage\n    window.localStorage.removeItem('graphSettings')\n    window.location.reload()\n  }\n\n  render () {\n    const { userData } = this.props\n    // console.log(userData)\n    return (\n      <ErrorBoundary>\n        <Layout\n          className='dashboard'\n        >\n          <Layout>\n            <Sider className='sider' width={270} >\n              <div className='logo' style={{\n                padding: '10px',\n                background: '#fff'\n              }}>\n                <Link to={'/'}>\n                  <img\n                    src={goodReadsLogo}\n                    width='250px'\n                    alt='Goodreads'\n                  />\n                </Link>\n              </div>\n              {\n                getUserComponent(userData)\n              }\n              {\n                getMenu(this)\n              }\n            </Sider>\n            <Layout style={{ padding: '0 24px 24px' }}>\n              <Breadcrumb style={{ margin: '16px 0' }}>\n                <Breadcrumb.Item>Home</Breadcrumb.Item>\n                <Breadcrumb.Item>User</Breadcrumb.Item>\n                <Breadcrumb.Item>Books</Breadcrumb.Item>\n              </Breadcrumb>\n              <Content\n                className='mainContent'\n                style={{\n                  backgroundImage: { bgImage }, padding: 0, margin: 0, height: '100%'\n                }}\n              >\n                { getContent(this) }\n              </Content>\n            </Layout>\n          </Layout>\n        </Layout>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst getContent = (context) => {\n  const { selectedMenu, selectedShelf, graphSettings } = context.state\n  const { userData } = context.props\n  if (context.props.userData) {\n    if (selectedMenu === 0) {\n      const { nodes, links } = getGraphData(context.props.userData, context.state.selectedShelves)\n      return (\n        <NetworkGraph\n          nodes={nodes}\n          links={links}\n          {...graphSettings}\n        />\n      )\n    } else if (selectedMenu === 1) {\n      return getBookLibrary(userData, selectedShelf)\n    }\n  }\n}\n\nconst getUserComponent = (userData) => {\n  if (userData) {\n    return (\n      <UserProfile\n        user={{\n          name: userData.name || '',\n          userName: userData.user_name || '',\n          image: userData.image_url || '',\n          link: userData.link,\n          description: typeof userData.about === 'string' ? userData.about : `Last active: ${userData.last_active}`\n        }}\n      />\n    )\n  }\n  return (\n    <UserProfile\n      user={{\n        name: '',\n        userName: '',\n        image: '',\n        description: ''\n      }}\n    />\n  )\n}\n\nconst getMenu = (context) => {\n  const { userData } = context.props\n  if (userData) {\n    console.log(userData)\n    return (\n      <Menu\n        mode='inline'\n        defaultOpenKeys={['shelves']}\n        style={{\n          // height: '100%',\n          borderRight: 0\n        }}\n        theme='light'\n        // selectable\n      >\n        <SubMenu\n          key='shelves'\n          title={\n            <span><Icon type='book' />Shelves</span>\n          }\n        >\n          <Tree\n            checkable\n            onSelect={context.onSelect}\n            onCheck={context.onCheck}\n            className='shelves'\n          >\n            {\n              userData.user_shelves.map(shelf => {\n                if (shelf.books.book) {\n                  const books = shelf.books.book.length ? shelf.books.book : [shelf.books.book]\n                  return (\n                    <TreeNode\n                      title={`${shelf.name} (${books.length})`}\n                      key={shelf.name}\n                      className='booksList'\n                    >\n                      {\n                        books.map((book, idx) => {\n                          return (\n                            <TreeNode\n                              title={`${book.title} (${book.published})`}\n                              key={`${idx}_${book.title}`}\n                              disableCheckbox\n                            />\n                          )\n                        })\n                      }\n                    </TreeNode>\n                  )\n                }\n                return (\n                  <TreeNode\n                    title={`${shelf.name} (0)`}\n                    key={shelf.name}\n                    disabled\n                  />\n                )\n              })\n            }\n          </Tree>\n        </SubMenu>\n        <SubMenu\n          key='settings'\n          title={<span><Icon type='setting' />Settings</span>}\n        >\n          <Settings\n            onChange={context.onSettingsChange}\n            onReset={context.onSettingsReset}\n            settings={context.state.graphSettings}\n          />\n          {/* {\n            userData.user_shelves.map((shelf, idx) => (\n              <Menu.Item key={idx}>\n                <Link to={`/user/${userData.id}/shelf/${shelf.name}`}>\n                  {`${shelf.name} (${shelf.books.book ? shelf.books.book.length || 1 : 0})`}\n                </Link>\n              </Menu.Item>\n            ))\n          } */}\n        </SubMenu>\n      </Menu>\n    )\n  }\n}\n\nconst getBookLibrary = (userData, shelf) => {\n  if (userData) {\n    let bookShelf = userData.user_shelves.find(sh => sh.name === shelf)\n    if (bookShelf) {\n      let { books } = bookShelf\n      if (!books.book) return <div />\n      books = books.book.length ? books.book : [ books.book ]\n      return (\n        <div\n          style={{\n            width: '100%',\n            height: '100%',\n            overflow: 'auto'\n          }}\n        >\n          <BookLibrary\n            books={books}\n            margin={0}\n            columns={7}\n          />\n        </div>\n      )\n    }\n    return (\n      <div\n        style={{\n          padding: 20\n        }}\n      >\n        <p>Bookshelf doesn't exist.</p>\n      </div>\n    )\n  }\n  return <div />\n}\n\nexport default connect(\n  mapStorageToProps,\n  mapDispatchToProps\n)(Dashboard)\n"],"sourceRoot":""}